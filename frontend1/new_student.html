<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <!-- bootstrap css -->
    <link
      rel="stylesheet"
      href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
      integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm"
      crossorigin="anonymous"
    />
    <!-- bootstrap js -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"
      integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"
      integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
      crossorigin="anonymous"
    ></script>
  </head>
  <body>
    <div
      class="d-flex flex-column"
      id="index_container"
      style="width: 98vw; overflow: hidden"
    >
      <div id="header">
        <nav class="navbar navbar-expand-lg navbar-dark bg-dark fixed-top">
          <a class="navbar-brand" href="#">Student Portal</a>
          <button
            class="navbar-toggler"
            type="button"
            data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent"
            aria-expanded="false"
            aria-label="Toggle navigation"
          >
            <span class="navbar-toggler-icon"></span>
          </button>

          <div
            class="collapse navbar-collapse"
            id="navbarSupportedContent"
          ></div>
        </nav>
      </div>
      <div
        id="new_student"
        class="container border border-info"
        style="margin: 70px auto"
      >
        <a href="dashboard.html" class="btn btn-sm btn-info">Back</a>
        <form>
          <div class="form-row" style="margin: 1rem 0">
            <div class="col">
              <div class="form-group">
                <label for="first_name">First Name</label>
                <input
                  type="text"
                  class="form-control"
                  id="first_name"
                  aria-describedby="emailHelp"
                  placeholder="Enter First Name"
                  required
                />
              </div>
            </div>
            <div class="col">
              <div class="form-group">
                <label for="last_name">Last Name</label>
                <input
                  type="text"
                  class="form-control"
                  id="last_name"
                  aria-describedby="emailHelp"
                  placeholder="Last Name"
                  required
                />
              </div>
            </div>
          </div>
          <div class="form-row" style="margin: 1rem 0">
            <div class="col">
              <div class="form-group">
                <label for="university_email">University Email address</label>
                <input
                  type="email"
                  class="form-control"
                  id="university_email"
                  aria-describedby="emailHelp"
                  placeholder="Enter University Email"
                  required
                />
              </div>
            </div>
            <div class="col">
              <div class="form-group">
                <label for="dob">DOB</label>
                <input
                  type="text"
                  class="form-control"
                  id="dob"
                  aria-describedby="emailHelp"
                  placeholder="Enter DOB"
                />
              </div>
            </div>
          </div>
          <div class="form-row" style="margin: 1rem 0">
            <div class="col">
              <div class="form-group">
                <label for="phone_number">Phone Number</label>
                <input
                  type="text"
                  class="form-control"
                  id="phone_number"
                  aria-describedby="emailHelp"
                  placeholder="Enter Phone Number"
                />
              </div>
            </div>
            <div class="col">
              <div class="form-group">
                <label for="personal_email">Personal Email address</label>
                <input
                  type="email"
                  class="form-control"
                  id="personal_email"
                  aria-describedby="emailHelp"
                  placeholder="Enter Personal Email"
                />
              </div>
            </div>
          </div>
          <div class="form-row" style="margin: 1rem 0">
            <div class="col">
              <div class="form-group">
                <label for="degree_enrolled">Degree Enrolled</label>
                <input
                  type="text"
                  class="form-control"
                  id="degree_enrolled"
                  aria-describedby="emailHelp"
                  placeholder="Enter Degree Enrolled"
                  name="degree_enrolled"
                />
              </div>
            </div>
            <div class="col">
              <div class="form-group">
                <label for="college_institute">College/Institute</label>
                <input
                  type="text"
                  class="form-control"
                  id="college_institute"
                  aria-describedby="emailHelp"
                  placeholder="Enter College/Institute"
                  name="college_institute"
                />
              </div>
            </div>
          </div>
          <div class="form-row" style="margin: 1rem 0">
            <div class="col">
              <div class="form-group">
                <label for="department">Department</label>
                <input
                  type="text"
                  class="form-control"
                  id="department"
                  aria-describedby="emailHelp"
                  placeholder="Enter Department"
                  name="department"
                />
              </div>
            </div>
            <div class="col">
              <div class="form-group">
                <label for="specialization">Spacialization</label>
                <input
                  type="text"
                  class="form-control"
                  id="specialization"
                  aria-describedby="emailHelp"
                  placeholder="Enter Spacialization"
                  name="specialization"
                />
              </div>
            </div>
          </div>
          <div class="form-row" style="margin: 1rem 0">
            <div class="col">
              <div class="form-group">
                <label for="overall_grade">Overall Grade</label>
                <input
                  type="text"
                  class="form-control"
                  id="overall_grade"
                  aria-describedby="emailHelp"
                  placeholder="Enter Overall Grade"
                  name="overall_grade"
                />
              </div>
            </div>
            <div class="col">
              <div class="form-group">
                <label for="enrollment_status">Enrollment Status</label>
                <select
                  class="form-control"
                  id="enrollment_status"
                  name="enrollment_status"
                  required
                >
                  <option value="active" selected>Active</option>
                  <option value="alumni">Alumni</option>
                  <option value="deferred">Deferred</option>
                </select>
              </div>
            </div>
          </div>
          <div class="form-row" style="margin: 1rem 0">
            <div class="col-12">
              <div class="form-group">
                <label for="address">Address</label>
                <textarea class="form-control" id="address" rows="3"></textarea>
              </div>
            </div>
          </div>
          <button
            type="button"
            class="btn btn-info"
            id="new_student_save_button"
            style="margin: 1rem"
          >
            SAVE
          </button>
        </form>
      </div>
    </div>
    <script>
      $(document).ready(function () {
        $("#new_student_save_button").on("click", (e) => {
          e.preventDefault();
          let first_name = $("#first_name").val();
          let last_name = $("#last_name").val();
          let university_email = $("#university_email").val();
          let dob = $("#dob").val();
          let phone_number = $("#phone_number").val();
          let personal_email = $("#personal_email").val();
          let degree_enrolled = $("#degree_enrolled").val();
          let college_institute = $("#college_institute").val();
          let department = $("#department").val();
          let specialization = $("#specialization").val();
          let overall_grade = $("#overall_grade").val();
          let enrollment_status = $("#enrollment_status").val();
          let address = $("#address").val();

          if (
            first_name &&
            last_name &&
            university_email &&
            enrollment_status
          ) {
            $.ajax({
              contentType: "application/json; charset=utf-8",
              url: "http://localhost:9000/students",
              type: "POST",
              data: JSON.stringify({
                first_name: first_name,
                last_name: last_name,
                university_email: university_email,
                dob: dob,
                phone_number: phone_number,
                personal_email: personal_email,
                degree_enrolled: degree_enrolled,
                college_institute: college_institute,
                department: department,
                specialization: specialization,
                overall_grade: overall_grade,
                enrollment_status: enrollment_status,
                address: address,
              }),
              success: (message, status) => {
                if (message == "Student Data Added Successfully") {
                  alert(message);
                  $("#first_name").val("");
                  $("#last_name").val("");
                  $("#university_email").val("");
                  $("#dob").val("");
                  $("#phone_number").val("");
                  $("#personal_email").val("");
                  $("#degree_enrolled").val("");
                  $("#college_institute").val("");
                  $("#department").val("");
                  $("#specialization").val("");
                  $("#overall_grade").val("");
                  $("#enrollment_status").val("");
                  $("#address").val("");
                } else {
                  alert(message);
                }
              },
            });
          }
        });
      });
    </script>
  </body>
</html>
